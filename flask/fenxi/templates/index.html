<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>数据分析</title>
    <script  src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
    <script  src="{{ url_for('static', filename='js/angular.min.js') }}"></script>
    <script  src="{{ url_for('static', filename='js/highcharts.js') }}"></script>
    <script  src="{{ url_for('static', filename='js/highcharts-more.js') }}"></script>
    <script  src="{{ url_for('static', filename='js/echarts.min.js') }}"></script>
    <script  src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <script  src="{{ url_for('static', filename='js/exporting.js') }}"></script>
    <script  src="{{ url_for('static', filename='js/semantic.js') }}"></script>
    <script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static',filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/semantic.css') }}">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/sementic.min.css') }}">

</head>
<body ng-app="myApp" ng-controller="myCtrl">
<div class="ui equal width grid" style="width:90%;margin: 5px 5px 5px 20px">
        <div class="row">
                <div class="column">
                    <div class="ui black segment">
                        <div class="ui statistic">

                                <div class="value">
                               <p>数据分析：</p>

                                </div>
                                <div class="xingqi" style="float:left;position: relative;left: 420px;top:-45px;">
                                    <select class="ui search dropdown" ng-change="change(x)" ng-model="x" style="width: 200px">
                                  <option value="">请选择终端...</option>
                                        <option  ng-repeat="x in Jsons" value="">{{ key }} </option>
                            </select>
                                </div>
                        </div>
                    </div>
                </div>
        </div>

        <div class="row">
            <div class="column">
                <div class="ui container segment">
                    <div class="ui container " id="chart1"style="width:90%;margin: 5px 20px 5px 5px"></div>
                </div>
            </div>

        </div>

</div>

<label ng-hide="true" ng-bind="{{ f100 }}"></label>
<label ng-hide="true" ng-bind="{{ f101 }}"></label>
<label ng-hide="true" ng-bind="{{ f102 }}"></label>
<label ng-hide="true" ng-bind="{{ f103 }}"></label>
<label ng-hide="true" ng-bind="{{ f104 }}"></label>
<label ng-hide="true" ng-bind="{{ f105 }}"></label>
<label ng-hide="true" ng-bind="{{ f106 }}"></label>
<label ng-hide="true" ng-bind="{{ f107 }}"></label>
<label ng-hide="true" ng-bind="{{ f108 }}"></label>
<label ng-hide="true" ng-bind="{{ f109 }}"></label>
<label ng-hide="true" ng-bind="{{ f110 }}"></label>
<label ng-hide="true" ng-bind="{{ f111 }}"></label>
<label ng-hide="true" ng-bind="{{ f112 }}"></label>
<label ng-hide="true" ng-bind="{{ f114 }}"></label>
<label ng-hide="true" ng-bind="{{ f115 }}"></label>
<label ng-hide="true" ng-bind="{{ f116 }}"></label>
<label ng-hide="true" ng-bind="{{ f118 }}"></label>
<label ng-hide="true" ng-bind="{{ f119 }}"></label>

{#<script>#}
{#    var connection = new autobahn.Connection({#}
{#        url:'ws://127.0.0.1:5000/',#}
{#        realm:'realm1'#}
{#    });#}
{##}
{#    connection.onopen = function(session){#}
{#        session.subscribe('fascinatingSubject',function(message){#}
{#        document.getElementById('').innerHTML = message#}
{#        });#}
{#    };#}
{##}
{#    connection.open();#}
{#</script>#}
<script>
    var app = angular.module('myApp',[]);
    app.controller('myCtrl', function($scope) {
        $scope.zd="asdasd"

            var a = [
        {
            "a":{
            '101': '10',
            '102': '5',
            '103': '0',
            '104': '0',
            '105': '0',
            '106': '0',
            '107': '10',
            '108': '0',
            '109': '10',
            '110': '5',
            '111': '0',
            '112': '30',
            '114': '0',
            '115': '0',
            '116': '0',
            '118': '0',
            '119':'0'
        },
            "b": {
                    '101': '0',
                    '102': '0',
                    '103': '0',
                    '104': '10',
                    '105': '0',
                    '106': '0',
                    '107': '50',
                    '108': '0',
                    '109': '10',
                    '110': '5',
                    '111': '0',
                    '112': '0',
                    '114': '10',
                    '115': '0',
                    '116': '0',
                    '118': '0',
                    '119': '0'
                    }
        }
    ]

            $scope.Jsons = a;
            $scope.change = function (x) {
                // console.log(x)
                //一旦改变我就拿到了name的值
                angular.forEach(a, function (data) {
                    //  console.log(data.name)
                    if (data.name == x) {
                        console.log("哈")
                        $scope.f100 = data.value[100]
                        $scope.f101 = data.value[101]
                        $scope.f102 = data.value[102]
                        $scope.f103 = data.value[103]
                        $scope.f104 = data.value[104]
                        $scope.f105 = data.value[105]
                        $scope.f106 = data.value[106]
                        $scope.f107 = data.value[107]
                        $scope.f108 = data.value[108]
                        $scope.f109 = data.value[109]
                        $scope.f110 = data.value[110]
                        $scope.f111 = data.value[111]
                        $scope.f112 = data.value[112]
                        $scope.f114 = data.value[114]
                        $scope.f115 = data.value[115]
                        $scope.f116 = data.value[116]
                        $scope.f118 = data.value[118]
                        $scope.f119 = data.value[119]
                    }
                })
            }


$(function () {
    $('#chart1').highcharts({
        chart: {
            type: 'bubble',
            plotBorderWidth: 10,
            zoomType: 'xy'
        },
        legend: {
            enabled: false
        },
        title: {
            text: '终端轨迹'
        },

        xAxis: {
            gridLineWidth: 5,
            categories: ['','North', 'South', ' ','West', 'Middle', 'East',  'add'],
            plotLines: [{
                color: 'black',
                dashStyle: 'dot',
                label: {
                    rotation: 0,
                    y: 25,
                    style: {
                        fontStyle: 'italic'
                    }
                },
                zIndex: 3
            }]
        },
        credits: {
          enabled:false
                },
        yAxis: {
            gridLineWidth: 6,
            startOnTick: false,
            endOnTick: false,
            title: {
                text: '第三教学楼'
            },
            categories: ['','F1', 'F2', 'F3', 'F4', 'F5', ''],
            maxPadding: 0.1,
            plotLines: [{
                color: 'red',
                dashStyle: 'dot',
                label: {
                    align: 'right',
                    style: {
                        fontStyle: 'italic'
                    },
                    text: 'fffff',
                    x: -5
                },
                zIndex: 3
            }]
        },
        lang:{
            contextButtonTitle:"图表导出菜单",
            downloadJPEG:"下载JPEG图片",
            downloadPDF:"下载PDF文件",
            downloadPNG:"下载PNG文件",
            downloadSVG:"下载SVG文件",

        },
        tooltip: {
            backgroundColor:'#FCFFC5',
            shadow:true,
            useHTML: true,
            headerFormat: '<table>',
            pointFormat:
                '<tr><td>连接{point.z}次</td></tr>',
            footerFormat: '</table>',
            followPointer: true
        },

        plotOptions: {
            series: {
                dataLabels: {
                    enabled: true,
                    format: '{point.name}'
                }
            }
        },

        series: [{
            data: [
                { y: 1, x: 1, z: $scope.f106, name: '', country: '55' },
                { y: 1, x: 2, z: $scope.f101, name: '', country: '444' },
                { y: 1, x: 5, z: $scope.f102, name: '', country: '55' },
                { y: 1, x: 6, z: $scope.f116 , name: '', country: '55' },
                { y: 2, x: 1, z: $scope.f112, name: '', country: '55' },
                { y: 2, x: 2, z: $scope.f103, name: '', country: '444' },
                { y: 2, x: 4, z: $scope.f102, name: '', country: '55' },
                { y: 2, x: 5, z: $scope.f108, name: '', country: '55' },
                { y: 2, x: 6, z: $scope.f110 , name: '', country: '55' },
                { y: 2, x: 7, z: $scope.f100, name: '', country: '55' },
                { y: 3, x: 4, z: $scope.f115, name: '', country: '55' },
                { y: 3, x: 6, z: $scope.f114, name: '', country: '55' },
                { y: 4, x: 4, z: $scope.f119 , name: '', country: '55' },
                { y: 4, x: 5, z: $scope.f107, name: '', country: '55' },
                { y: 4, x: 6, z: $scope.f105 , name: '', country: '55' },
                { y: 5, x: 4, z: $scope.f111 , name: '', country: '55' },
                { y: 5, x: 5, z: $scope.f109, name: '', country: '55' },
                { y: 5, x: 6, z: $scope.f118  , name: '', country: '55' }
            ]
        }]
    });
});
              })
</script>

</body>

</html>

